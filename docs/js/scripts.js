let car=!1;function rand(e,i){return Math.floor(Math.random()*(i-e+1))+e}function roundNumber(e){const i=Math.floor(e);return e-i<.5?i:i+1}function updateInfo(){const e=document.querySelector("#mileage"),i=document.querySelector("#money"),t=document.querySelector("#bitcoin"),a=document.querySelector("#gasolinePrice"),o=document.querySelector("#dieselPrice"),r=document.querySelector("#electricityPrice"),n=document.querySelector("#bitcoinRate"),s=document.querySelector("#gameDays");e.innerHTML=e&&car?`Mileage: ${car.allmileage} KM`:"Mileage: 0  KM",i&&(i.innerHTML=`Money: ${player.money}$`),t&&(t.innerHTML=`Bitcoin: ${player.bitcoin}`),a&&(a.innerHTML=`Gasoline price: ${world.gasolinePrice}$ / 1L`),o&&(o.innerHTML=`Diesel price: ${world.dieselPrice}$ / 1L`),r&&(r.innerHTML=`Electricity price: ${world.electricityPrice.toFixed(1)}$ / kW`),n&&(n.innerHTML=`Bitcoin rate: ${world.bitcoinRate}$`),s&&(s.innerHTML=`Game Days: ${world.day}`)}class World{constructor(){this.day=0,this.bitcoinRate=rand(1e4,95e3),this.previousDay=0,this.gasolinePrice=17,this.dieselPrice=25,this.electricityPrice=1}}class Player{constructor(){this.isDriving=!1,this.allTravelTime=0,this.isMiningFarm=!1,this.bitcoin=0,this.money=0,this.hasWork=!1,this.hasCar=!1,this.dayWitoutFood=0,this.drunkenness=0,this.location="In world",this.expectation=0,this.waitingForTranslitomHana=10}goSleep(){let e;alert("The day is over."),world.previousDay=world.day,world.day++,world.bitcoinRate=rand(1e4,5e4),car&&car.open&&e<=0&&(alert("You forgot to close the car! In the future, we recommend closing it at night."),e=rand(0,100));let i=rand(1,100);i<40?world.gasolinePrice+=1:i>=60&&(world.gasolinePrice-=1);let t=rand(1,100);t<40?world.dieselPrice+=1:t>=60&&(world.dieselPrice-=1);let a=rand(1,100);if(a<40?world.electricityPrice+=.1:a>=60&&(world.electricityPrice-=.1),this.drunkenness=0,this.isMiningFarm&&!this.isDriving?(this.bitcoin+=.2,alert(`Mining farm produced 0.2 bitcoins. Total bitcoins: ${this.bitcoin}`)):this.isDriving&&alert("You are driving a car."),world.day-world.previousDay==1&&this.money>=20&&this.money>=455){let e=this.money;this.money-=rand(20,455),alert("Spent on food today: "+(e-this.money))}else if(world.day-world.previousDay==1&&this.money>=20&&this.money<455){let e=this.money;this.money-=rand(20,this.money),alert("Spent on food today: "+(e-this.money))}else this.dayWitoutFood++,this.dayWitoutFood>=4?(alert("You didn't eat for 4 days, that's why you ended up in the hospital"),this.dayWitoutFood=0,world.day++):this.dayWitoutFood>=2?(alert(`You haven't eaten in ${this.dayWitoutFood} days, better find money to eat.`),this.hasWork?alert("Go to work!"):alert("Go find a job!")):alert("You didn't have money for food, we advise you to find money as soon as possible");car&&car.ignition&&!this.isDriving&&car.accumCapacity>0&&car.checkBattery(),!this.hasCar&&this.money>45e3&&alert("You can buy a car!")}goParty(){if(this.money>50){alert("You came to the party.");let e,i=prompt("What will you drink? Water - 50, Tequila - 160, Cognac - 700, Decide randomly"),t=0,a=!0,o=!0,r=0;for(;;){if(this.drunkenness>=100){alert(`You're drunk. Your costs ${r}`);break}if("Decide randomly"===i){let i=rand(1,3);1===i?e=rand(50,800):2===i?e=480:3===i&&(e=rand(1400,1700)),r+=e,this.money;break}if("Water"===i)t=50;else if("Tequila"===i)t=160,this.drunkenness+=70;else{if("Cognac"!==i){if(i){alert("Invalid choice. Please choose a valid drink."),i=prompt("What will you drink? Water - 50, Tequila - 160, Cognac - 700, Decide randomly");continue}break}t=700,this.drunkenness+=100}if(this.money>=t&&"Decide randomly"!=i){if(alert(`You have spent ${t} money`),this.money-=t,t+=t,this.drunkenness>=160){alert("You're drunk.");break}if(a=confirm("Repeat?"),!a){if(o=confirm("Choose another drink?"),!o)break;i=prompt("What will you drink? Water - 50, Tequila - 160, Cognac - 700, Decide randomly")}}else if(this.money<t){alert("You don't have enough money for this drink.");break}}r>=1?alert(`You went home. Your costs ${r}`):alert("You went home."),this.goSleep()}else alert("You have no money, what will you do there?")}AFOUHelp(){if(this.money>10){let e=prompt("How much to donate to the Armed Forces of Ukraine?");if(null===e)return;for(e=parseInt(e);isNaN(e)||e>this.money;){if(isNaN(e)?alert("Only numbers!"):e>this.money&&alert("You don't have that much money, enter a smaller amount."),e=prompt("How much to donate to the Armed Forces of Ukraine?"),null===e)return;e=parseInt(e)}this.money-=e}else alert("You have no money. Go to work!")}sellBitcoin(){if(this.bitcoin>0&&!this.isDriving){let e=prompt(`You have ${this.bitcoin} bitcoins. Bitcoin rate ${world.bitcoinRate}. How many would you like to sell?`);isNaN(e)||e<0||e>this.bitcoin?alert("Invalid number of bitcoins to sell."):(this.bitcoin-=e,this.money+=e*world.bitcoinRate,alert(`You sold ${e} bitcoins or ${e*world.bitcoinRate} money units. You now have ${this.money} money units and ${this.bitcoin} bitcoins left.`))}else player.isDriving?alert("You are driving a car."):alert("You don't have any bitcoins to sell.")}work(){if(this.hasWork&&!this.isDriving){let e=0;for(let i=0;i<24;i++){let i=rand(1,10),t=rand(1,10),a=i+t,o=parseInt(prompt(`What is ${i} + ${t}? Your balance: ${this.money}`),10);if(o===a)e++,this.money+=42;else if(isNaN(o))break}}else player.isDriving?alert("You are driving a car."):alert("You don't have a job.")}liberationFromWork(){this.hasWork&&!this.isDriving?(player.hasWork=!1,alert("You quit your job")):player.isDriving?alert("You are driving a car."):alert("You don't have a job.")}buyCar(){this.hasCar?alert("You have a car"):this.money>45e3&&!this.isDriving?(this.hasCar=!0,this.money-=45e3,car=new Car("Mazda","Rx-7"),console.log(car),alert("You bought a car.")):this.money<45e3&&alert(`You don't have 45000 dollars! Your balance is ${this.money}`)}buyMiningFarm(){this.isMiningFarm||this.isDriving?alert("You already have a mining farm"):this.money>=18e3?(this.isMiningFarm=!0,this.money-=18e3,alert("You bought a mining farm.")):alert("You don't have enough money to buy a mining farm.")}findWork(){if(this.hasWork||this.isDriving)this.hasWork?alert("You already have a job."):this.isDriving&&alert("You are driving a car.");else{rand(0,100)>50?(this.hasWork=!0,alert("You found a job!")):alert("You haven't found a job. Try again later."),this.goSleep()}}getIntoACar(){this.hasCar&&!this.isDriving&&"car"!==this.location&&car.open?this.location="car":"car"===this.location?alert("You are in the car."):car.open&&alert("Open the car!")}getOutACar(){this.hasCar&&!this.isDriving&&"car"==this.location?this.location="In world":"car"!==this.location&&alert("You are not in the car.")}}class Car{constructor(e,i){this.mark=e,this.model=i,this.yearOfManufacture=2001,this.accumCapacity=60,this.fuelType="gasoline",this.fuel=10,this.key=!1,this.ignition=!1,this.isEngineStart=!1,this.engineSwear=0,this.fuelConsumption100km=12,this.fuelConsumption1km=.123,this.mileage=0,this.allmileage=0,this.previousmileage=this.allmileage,this.maxSpeed=257,this.speedCoefficient=0,this.kmSinceLastEngineSwearUpdate,this.fuelTank=30,this.open=!1,player.expectation=!0}ignitionOn(e){e.hasCar&&!e.isDriving&&"car"===e.location?this.accumCapacity>1&&!0===this.key?(alert("Ignition is on"),this.ignition=!0):this.accumCapacity<1?alert("The accumulator is discharged. Use a 'repairCar'"):!1===this.key&&alert("You have not inserted the key"):e.hasCar?e.isDriving?alert("You are driving a car."):"car"!==e.location&&alert("You are not in the car."):alert("You don't have a car! You need to buy it!")}startDrive(e){if(e.hasCar&&this.isEngineStart&&this.fuel>1&&"car"===e.location){this.speedCoefficient=rand(1.1,1.9);let i=prompt("Choose the maximum speed");for(;null!==i&&(i=parseInt(i),isNaN(i)||i>this.maxSpeed||i<=0);)alert(`The maximum speed of this car is ${this.maxSpeed} km/h!`),i=prompt("Choose the maximum speed");if(i>this.maxSpeed-43)return alert("You burned the engine."),e.hasCar=!1,this.engineSwear=100,this.isEngineStart=!1,this.ignition=!1,void(this.accumCapacity=0);if(i&&e.hasCar&&this.isEngineStart){let t=(this.fuel/this.fuelConsumption1km).toFixed(3);this.previousmileage=this.allmileage,e.isDriving=!0,alert("You are driving. Please wait for messages...");let a=setInterval((()=>{if(e.hasCar&&this.isEngineStart&&(console.clear(),this.addKM(),console.log(`Accumulator capacity: ${this.accumCapacity}`),console.log(`Fuel type: ${this.fuelType}`),console.log(`Fuel: ${this.fuel.toFixed(0)} L`),console.log(`Trevel mileage: ${this.mileage.toFixed(0)} KM`),console.log(`AllMileage: ${this.allmileage.toFixed(0)} KM`),console.log(`Engine swear: ${this.engineSwear}%`)),this.fuel<=1){clearInterval(a),e.isDriving=!1;let o=rand(0,12),r=t/i*this.speedCoefficient*60;if(e.allTravelTime+=r,e.allTravelTime>1){for(let i=0;i<roundNumber(e.travelTime);i++)e.goSleep();e.allTravelTime=0}o>8&&e.money>500?alert("You need to get a can of gasoline at the gas station."):o<8?alert("Fuel is running out. Go to the gas station."):o>8&&alert("You don't have enough fuel to get to the gas station. Collect enough money to buy fuel, then use go to the gasoline station."),this.isEngineStart=!1,this.ignition=!1}}),1e3);this.mileage=0}}else e.hasCar?this.isEngineStart?this.fuel<=1?alert("You need to refuel the car."):"car"!==e.location?alert("You are not in he car."):this.accumCapacity<1?alert("The accumulator is discharged. Use a 'repairCar'"):alert("Something went wrong."):alert("You didn't turn on the car."):alert("You don't have a car! You need to buy it!")}engineOff(e){e.hasCar&&e.isEngineStart&&"car"===e.location?(this.isEngineStart=!1,this.ignition=!1,e.isDriving=!1):e.hasCar?this.isEngineStart?alert("Your engine is not started."):"car"!==e.location&&alert("You are not in the car."):alert("You don't have a car! You need to buy it!")}insertKey(e){e.hasCar&&!e.isDriving&&"car"===e.location?(this.key=!0,alert("Key inserted")):e.hasCar?e.isDriving?alert("You are driving a car."):"car"!==e.location&&alert("You are not in the car."):alert("You don't have a car! You need to buy it!")}startEngine(e){e.hasCar&&this.engineSwear<100&&!e.isDriving&&"car"===e.location?this.fuel>0&&!0===this.ignition?(alert("Engine started successfully"),this.isEngineStart=!0):alert("The engine isn't turned on"):e.hasCar?this.engineSwear>100&&!e.isDriving?alert("The car is almost completely defective. It will not work to turn it on."):"car"!==e.location&&alert("You are not in the car."):alert("You don't have a car! Go to work!")}refuel(e){if(!e.hasCar)return void alert("You don't have a car! You need to buy it!");if(e.isDriving)return void alert("You are driving the car. Stop driving to refuel.");if("car"==e.location)return void alert("You must get out of the car before refueling");if(this.fuel===this.fuelTank)return void alert("Your fuel tank is full!");if(e.money<world.gasolinePrice)return void alert("You don't have enough money");let i=parseInt(prompt(`How much to fill up the car? ${this.fuelType} costs ${world.gasolinePrice} per liter`));for(;isNaN(i)||i<=0||i+this.fuel>this.fuelTank;)isNaN(i)||i<=0?alert("Enter a positive number"):i+this.fuel>this.fuelTank&&alert(`Fuel tank is ${this.fuelTank} liters. You can add only ${this.fuelTank-this.fuel} liters more.`),i=parseInt(prompt(`How much to fill up the car? ${this.fuelType} costs ${world.gasolinePrice} per liter`));let t=i*world.gasolinePrice;e.money<t?alert("You don't have enough money to refuel this amount"):(this.fuel+=i,this.fuel>this.fuelTank&&(this.fuel=this.fuelTank),e.money-=t,alert(`The fuel tank is filled with ${this.fuel} liters`))}checkBattery(){this.ignition&&!player.isDriving&&this.accumCapacity>0&&!player.isDriving&&"car"!==player.location&&world.day-world.previousDay>=1&&(this.accumCapacity-=30,this.accumCapacity=0,this.ignition=!1)}repairCar(e){if(e.hasCar&&!e.isDriving&&this.engineSwear>0||this.accumCapacity>100&&"car"!==e.location){let i=(1e3*this.engineSwear/3.5).toFixed(0);e.money>i?(this.engineSwear=0,this.accumCapacity=100,alert("The car has been repaired. The repair was expensive: "+i)):alert("You don't have enough funds. Repair price: "+i)}else e.hasCar?e.isDriving?alert("You are driving a car."):"car"===e.location?alert("Get out of the car."):car.engineSwear<=0&&100===this.accumCapacity&&alert("Your car is in perfect condition"):alert("You don't have a car! You need to buy it!")}addKM(){this.fuel-=this.fuelConsumption1km,this.mileage+=1,this.allmileage+=1,this.kmSinceLastEngineSwearUpdate+=1,this.kmSinceLastEngineSwearUpdate>=500&&(this.engineSwear+=1,this.kmSinceLastEngineSwearUpdate=0),this.accumCapacity<100&&(this.accumCapacity+=1)}openCar(){!player.hasCar||player.isDriving||"car"===player.location||this.open||(this.open=!0,alert("Car is open!"))}closeCar(){player.hasCar&&!player.isDriving&&"car"!==player.location&&this.open&&(this.open=!1,alert("Car is close!"))}}let world=new World,player=new Player,fuelScale=document.getElementById("indicatorScaleFuel");function updateIndicatorsPanel(){if(player.hasCar){let e=document.getElementById("indicators");e?e.style.display="block":console.log('Element with ID "indicators" not found')}else{let e=document.getElementById("indicators");e?e.style.display="none":console.log('Element with ID "indicators" not found')}}function updateIndicatorFuelScale(){const e=car.fuel,i=document.getElementById("indicatorScale-bar-fuel"),t=car.fuelTank;if(i){const a=e/t*345;i.style.height=`${a}px`,car.fuel===car.fuelTank&&(i.style.borderRadius="20px")}else console.log('Element with ID "indicatorScale-bar-fuel" not found')}function updateIndicatorAccumCapacityScale(){const e=car.accumCapacity,i=document.getElementById("indicatorScale-bar-accum");if(i){const t=e/100*245;i.style.height=`${t}px`,94===car.accumCapacity?i.style.borderRadius="5px":car.accumCapacity>95&&car.accumCapacity<=97?i.style.borderRadius="15px":i.style.borderRadius="20px"}else console.log('Element with ID "indicatorScale-bar-accum" not found')}function updateIndicatorEngineSwearScale(){const e=car.engineSwear,i=document.getElementById("indicatorScale-bar-EngineSwear");if(i){const t=e/100*106;i.style.height=`${t}px`,85===car.engineSwear?i.style.borderRadius="5px":car.engineSwear>=90&&car.engineSwear<97?i.style.borderRadius="15px":car.engineSwear>=97&&(i.style.borderRadius="20px")}else console.log('Element with ID "indicatorScale-bar-EngineSwear" not found')}function hideButtons(e,i){let t=document.getElementById(e),a=document.getElementById(i);t?t.style.display="none":console.log(`Element with ID '${e}' not found`),a?a.style.display="flex":console.log(`Element with ID '${i}' not found`)}function showCar(){document.getElementById("car").classList.add("active"),document.getElementById("player").classList.remove("active")}function changebg(){let e=document.getElementById("bg");car&&!player.isDriving?e.src="img/bg.jpg":player.isDriving?e.src="img/ride.gif":e.src="img/bg-none-car.jpg"}function interval(){changebg(),updateInfo(),updateIndicatorsPanel(),updateIndicatorFuelScale(),updateIndicatorAccumCapacityScale(),updateIndicatorEngineSwearScale()}interval(),setInterval(interval,1e3);